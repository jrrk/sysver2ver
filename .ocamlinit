#directory "/home/jrrk2/.opam/system/lib/xml-light";;
#print_depth 10000;;
#print_length 100000;;

open Vxml

(*
let xmlf = "../picorv32/xml_verilator_dir/Vpicorv32_wrapper.xml";;
let xmlf = "/local/scratch/jrrk2/ariane-vcs-regression/ariane/obj_dir/Vdmi_jtag.xml";;
let xmlf = "/local/scratch/jrrk2/ariane-vcs-regression/ariane/work-xml/Variane_testharness.xml";;
let xmlf = "obj_dir/Vjtag_xilinx_fixed.xml";;
let xmlf = "obj_dir/Vdmi_testharness_0.xml";;
let xmlf = "obj_dir/Vblif01g.xml";;
let xmlf = "obj_dir/Vonehot16.xml";;
let xmlf = "obj_dir/Vinterface_test.xml";;
let xmlf = "obj_dir/Vsimple.xml";;
let xmlf = "obj_dir/Vchip.xml";;
let xmlf = "obj_dir/Vmaster_opt.xml";;
let xmlf = "obj_dir/Varray2d.xml";;
let xmlf = "obj_dir/Vmaster.xml";;
let xmlf = "obj_dir/Vpicorv32_ref.xml";;
let xmlf = "obj_dir/Vpicorv32_pcpi_mul.xml";;
let xmlf = "obj_dir/Vreduceor.xml";;
let xmlf = "obj_dir/Vreset_transform.xml";;
let xmlf = "obj_dir/Vaccum.xml";;
let xmlf = "obj_dir/Vdecoder.xml";;
let xmlf = "obj_dir/Valways_test.xml";;
let xmlf = "obj_dir/Vtilde.xml";;
let xmlf = "obj_dir/Vtestbench_golden.xml";;
*)

let xmlf = "obj_dir/Vpicorv32_wrapper.xml";;

let errlst = ref [];;
let (line,range,rwxml,xml,mods) = Vxml.translate errlst xmlf;;

let f k = Hashtbl.find Vxml.modules_opt k;;
let p k = Hashtbl.find Vxml.packages k;;
let d f = Vxml.dump f (Hashtbl.find Vxml.modules f)
let h k = Hashtbl.find Vxml.hierarchy k;;

let othcnt = (
List.length !exprothlst,
List.length !stmtothlst,
List.length !portothlst,
List.length !iothlst,
List.length !csothlst,
List.length !bgnothlst,
List.length !itmothlst,
List.length !catothlst,
List.length !cellothlst,
List.length !posneglst,
List.length !typothlst,
List.length !memothlst
);;

